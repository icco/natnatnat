$(document).ready(function(){var e=!1,t=!1;$("input, select, textarea").bind("input propertychange",function(){e=!0}),window.onbeforeunload=function(i){if(e&&!t){var n="You have not saved your changes.",i=i||window.event;return i&&(i.returnValue=n),n}},$("form").submit(function(){t=!0})}),function(e){var t={key:null,endpoint:"oembed",secure:null,query:{},method:"replace",addImageStyles:!0,wrapElement:"div",className:"embed",batch:20,urlRe:null},i=/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,n=function(e){return null===e||void 0===e},r=function(t,i){var n=[],r=[];return e.each(t,function(e,t){r.push(t),r.length===i&&(n.push(r),r=[])}),0!==r.length&&n.push(r),n},o=function(t){return n(t)?[]:e.isArray(t)?t:[t]},s=function(t){return e.map(t[0],function(i,n){return[e.map(t,function(e){return e[n]})]})},a=function(e,t,i){this.init(e,t,i)};a.prototype={init:function(t){this.urls=t,this.count=0,this.results={},this._deferred=e.Deferred()},notify:function(t){if(this.results[t.original_url]=t,this.count++,this._deferred.notify.apply(this._deferred,[t]),this.count===this.urls.length){var i=this,n=e.map(this.urls,function(e){return i.results[e]});this._deferred.resolve(n)}return this},state:function(){return this._deferred.state.apply(this._deferred,arguments)}},window.Keeper=a;var l=function(){};l.prototype={defaults:{},log:function(e,t){n(window.console)||n(window.console[e])||window.console[e].apply(window.console,[t])},build:function(t,i,r){r=n(r)?{}:r;var o=r.secure;n(o)&&(o="https:"===window.location.protocol);var s=(o?"https":"http")+"://api.embed.ly/"+("objectify"===t?"2/":"1/")+t,a=n(r.query)?{}:r.query;return a.key=r.key,s+="?"+e.param(a),s+="&urls="+e.map(i,encodeURIComponent).join(",")},ajax:function(l,d,u){if(u=e.extend({},t,e.embedly.defaults,"object"==typeof u&&u),n(u.key))return this.log("error","Embedly jQuery requires an API Key. Please sign up for one at http://embed.ly"),null;d=o(d);var h,p=new a(d),c=[],f=[];e.each(d,function(e,t){h=!1,i.test(t)&&(h=!0,null!==u.urlRe&&u.urlRe.test&&!u.urlRe.test(t)&&(h=!1)),h===!0?c.push(t):f.push({url:t,original_url:t,error:!0,invalid:!0,type:"error",error_message:'Invalid URL "'+t+'"'})});var m=r(c,u.batch),y=this;return e.each(m,function(t,i){e.ajax({url:y.build(l,i,u),dataType:"jsonp",success:function(t){e.each(s([i,t]),function(e,t){var i=t[1];i.original_url=t[0],i.invalid=!1,p.notify(i)})}})}),f.length&&setTimeout(function(){e.each(f,function(e,t){p.notify(t)})},1),p._deferred},oembed:function(e,t){return this.ajax("oembed",e,t)},preview:function(e,t){return this.ajax("preview",e,t)},objectify:function(e,t){return this.ajax("objectify",e,t)},extract:function(e,t){return this.ajax("extract",e,t)}};var d=function(){};d.prototype={build:function(t,i,r){r=e.extend({},e.embedly.defaults,"object"==typeof r&&r);var o=r.secure;n(o)&&(o="https:"===window.location.protocol);var s=(o?"https":"http")+"://i.embed.ly/"+("display"===t?"1/":"1/display/")+t,a=n(r.query)?{}:r.query;return a.key=r.key,s+="?"+e.param(a),s+="&url="+encodeURIComponent(i)},display:function(e,t){return this.build("display",e,t)},resize:function(e,t){return this.build("resize",e,t)},fill:function(e,t){return this.build("fill",e,t)},crop:function(e,t){return this.build("crop",e,t)}};var u=function(e,t,i){this.init(e,t,i)};u.prototype={init:function(t,i,n){this.elem=t,this.$elem=e(t),this.original_url=i,this.options=n,this.loaded=e.Deferred();var r=this;this.loaded.done(function(){r.$elem.trigger("loaded",[r])}),this.$elem.trigger("initialized",[this])},progress:function(t){e.extend(this,t),this.options.display?this.options.display.apply(this.elem,[this,this.elem]):"oembed"===this.options.endpoint&&this.display(),this.loaded.resolve(this)},imageStyle:function(){var e,t=[];return this.options.addImageStyles&&(this.options.query.maxwidth&&(e=isNaN(parseInt(this.options.query.maxwidth,10))?"":"px",t.push("max-width: "+this.options.query.maxwidth+e)),this.options.query.maxheight&&(e=isNaN(parseInt(this.options.query.maxheight,10))?"":"px",t.push("max-height: "+this.options.query.maxheight+e))),t.join(";")},display:function(){if("error"===this.type)return!1;this.style=this.imageStyle();var e;"photo"===this.type?(e="<a href='"+this.original_url+"' target='_blank'>",e+="<img style='"+this.style+"' src='"+this.url+"' alt='"+this.title+"' /></a>"):"video"===this.type||"rich"===this.type?e=this.html:(this.title=this.title||this.url,e=this.thumbnail_url?"<img src='"+this.thumbnail_url+"' class='thumb' style='"+this.style+"'/>":"",e+="<a href='"+this.original_url+"'>"+this.title+"</a>",e+=this.provider_name?"<a href='"+this.provider_url+"' class='provider'>"+this.provider_name+"</a>":"",e+=this.description?'<div class="description">'+this.description+"</div>":""),this.options.wrapElement&&(e="<"+this.options.wrapElement+' class="'+this.options.className+'">'+e+"</"+this.options.wrapElement+">"),this.code=e,"replace"===this.options.method?this.$elem.replaceWith(this.code):"after"===this.options.method?this.$elem.after(this.code):"afterParent"===this.options.method?this.$elem.parent().after(this.code):"replaceParent"===this.options.method&&this.$elem.parent().replaceWith(this.code),this.$elem.trigger("displayed",[this])}},e.embedly=new l,e.embedly.display=new d,e.fn.embedly=function(i){if(void 0===i||"object"==typeof i){if(i=e.extend({},t,e.embedly.defaults,"object"==typeof i&&i),n(i.key))return e.embedly.log("error","Embedly jQuery requires an API Key. Please sign up for one at http://embed.ly"),this.each(e.noop);var r={},o=function(t){if(!e.data(e(t),"embedly")){var n=e(t).attr("href"),o=new u(t,n,i);e.data(t,"embedly",o),r.hasOwnProperty(n)?r[n].push(o):r[n]=[o]}},s=this.each(function(){n(e(this).attr("href"))?e(this).find("a").each(function(){n(e(this).attr("href"))||o(this)}):o(this)}),a=e.embedly.ajax(i.endpoint,e.map(r,function(e,t){return t}),i).progress(function(t){e.each(r[t.original_url],function(e,i){i.progress(t)})});return i.progress&&a.progress(i.progress),i.done&&a.done(i.done),s}},e.expr[":"].embedly=function(t){return!n(e(t).data("embedly"))},e.fn.display=function(i,r){if(n(i)&&(i="display"),void 0===r||"object"==typeof r){if(r=e.extend({},t,e.embedly.defaults,"object"==typeof r&&r),n(r.key))return e.embedly.log("error","Embedly jQuery requires an API Key. Please sign up for one at http://embed.ly/display"),this.each(e.noop);var o=function(t){var n=e(t);if(!n.data("display")){var o=n.data("src")||n.attr("href"),s={original_url:o,url:e.embedly.display.build(i,o,r)};n.data("display",s),n.trigger("initialized",[t]);var a="<img src='"+s.url+"' />";n.is("a")?n.append(a):n.replaceWith(a)}},s=function(t){return!n(e(t).data("src"))||!n(e(t).attr("href"))},a=this.each(function(){s(this)?o(this):e(this).find("img,a").each(function(){s(this)&&o(this)})});return a}},e.expr[":"].display=function(t){return!n(e(t).data("display"))}}(jQuery,window),$(document).ready(function(){$("li.link").each(function(e,t){$(t).children("a.adder").click(function(){link=$(t).children("a.actual")[0],title=$(link).text(),tags=$(this).data("tags"),url=$(link).attr("href"),mkd="\n["+title+"]("+url+")\n\n"+tags,ta=$('textarea[name="text"]'),ta.val(ta.val()+mkd)})})}),$(document).ready(function(){var e="textarea[name=text]";$(e).length&&$(e).bind("input propertychange",function(){$.post("/md",{text:$(this).val()},function(e){$("#rendered").html(e)})});var t="input[name=title]";$(t).length&&$(t).bind("input propertychange",function(){$("#rendered_title").text($(t).val())}),$(".slidingDiv").hide(),$(".show_hide").click(function(){$("#rendered").slideToggle()})});var videoUrlRe=/https?:\/\/(www\.)?(youtu|vimeo|soundcloud).+/i,defaults={key:"be853af8968a408eb7ec368d2019614a",query:{maxwidth:Math.min($(window).width(),720),words:20},secure:!0,method:$.noop,urlRe:videoUrlRe};$.embedly.defaults=defaults,$(".markdown a").each(function(e,t){var i=$(t).attr("href");$.embedly.oembed([i]).done(function(e){var n=$("<div/>",{class:"embed pure-u-1",data:i});if(!e[0].error){void 0!=e[0].html?(n.append(e[0].html),n.removeClass("embed")):(title=$("<h1/>").append(e[0].title),desc=$("<p/>").append(e[0].description),n.append(title),n.append(desc));var r=$(t).parents(".post").children(".addons");r.append(n)}})}),$(document).ready(function(){$("time").each(function(e,t){var i=moment($(t).attr("datetime"),"YYYY-MM-DDTHH:mm:ss.SSSSSSZ");console.log(i),$(t).text(i.fromNow()),$(t).attr("title",i.format())}),$("#links h2").each(function(e,t){var i=moment($(t).text(),"YYYY-MM-DD HH:mm:ssZ");$(t).text(i.utc().format("MMMM Do YYYY"))})});
//# sourceMappingURL=/js/nat.min.js.map