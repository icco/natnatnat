$(document).ready(function(){var t=!1,e=!1;$("input, select, textarea").bind("input propertychange",function(){t=!0}),window.onbeforeunload=function(i){if(t&&!e){var n="You have not saved your changes.",i=i||window.event;return i&&(i.returnValue=n),n}},$("form").submit(function(){e=!0})}),function(t){var e={key:null,endpoint:"oembed",secure:null,query:{},method:"replace",addImageStyles:!0,wrapElement:"div",className:"embed",batch:20,urlRe:null},i=/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,n=function(t){return null===t||void 0===t},r=function(e,i){var n=[],r=[];return t.each(e,function(t,e){r.push(e),r.length===i&&(n.push(r),r=[])}),0!==r.length&&n.push(r),n},o=function(e){return n(e)?[]:t.isArray(e)?e:[e]},a=function(e){return t.map(e[0],function(i,n){return[t.map(e,function(t){return t[n]})]})},s=function(t,e,i){this.init(t,e,i)};s.prototype={init:function(e){this.urls=e,this.count=0,this.results={},this._deferred=t.Deferred()},notify:function(e){if(this.results[e.original_url]=e,this.count++,this._deferred.notify.apply(this._deferred,[e]),this.count===this.urls.length){var i=this,n=t.map(this.urls,function(t){return i.results[t]});this._deferred.resolve(n)}return this},state:function(){return this._deferred.state.apply(this._deferred,arguments)}},window.Keeper=s;var l=function(){};l.prototype={defaults:{},log:function(t,e){n(window.console)||n(window.console[t])||window.console[t].apply(window.console,[e])},build:function(e,i,r){r=n(r)?{}:r;var o=r.secure;n(o)&&(o="https:"===window.location.protocol);var a=(o?"https":"http")+"://api.embed.ly/"+("objectify"===e?"2/":"1/")+e,s=n(r.query)?{}:r.query;return s.key=r.key,a+="?"+t.param(s),a+="&urls="+t.map(i,encodeURIComponent).join(",")},ajax:function(l,u,d){if(d=t.extend({},e,t.embedly.defaults,"object"==typeof d&&d),n(d.key))return this.log("error","Embedly jQuery requires an API Key. Please sign up for one at http://embed.ly"),null;u=o(u);var h,p=new s(u),c=[],f=[];t.each(u,function(t,e){h=!1,i.test(e)&&(h=!0,null!==d.urlRe&&d.urlRe.test&&!d.urlRe.test(e)&&(h=!1)),!0===h?c.push(e):f.push({url:e,original_url:e,error:!0,invalid:!0,type:"error",error_message:'Invalid URL "'+e+'"'})});var m=r(c,d.batch),y=this;return t.each(m,function(e,i){t.ajax({url:y.build(l,i,d),dataType:"jsonp",success:function(e){t.each(a([i,e]),function(t,e){var i=e[1];i.original_url=e[0],i.invalid=!1,p.notify(i)})}})}),f.length&&setTimeout(function(){t.each(f,function(t,e){p.notify(e)})},1),p._deferred},oembed:function(t,e){return this.ajax("oembed",t,e)},preview:function(t,e){return this.ajax("preview",t,e)},objectify:function(t,e){return this.ajax("objectify",t,e)},extract:function(t,e){return this.ajax("extract",t,e)}};var u=function(){};u.prototype={build:function(e,i,r){r=t.extend({},t.embedly.defaults,"object"==typeof r&&r);var o=r.secure;n(o)&&(o="https:"===window.location.protocol);var a=(o?"https":"http")+"://i.embed.ly/"+("display"===e?"1/":"1/display/")+e,s=n(r.query)?{}:r.query;return s.key=r.key,a+="?"+t.param(s),a+="&url="+encodeURIComponent(i)},display:function(t,e){return this.build("display",t,e)},resize:function(t,e){return this.build("resize",t,e)},fill:function(t,e){return this.build("fill",t,e)},crop:function(t,e){return this.build("crop",t,e)}};var d=function(t,e,i){this.init(t,e,i)};d.prototype={init:function(e,i,n){this.elem=e,this.$elem=t(e),this.original_url=i,this.options=n,this.loaded=t.Deferred();var r=this;this.loaded.done(function(){r.$elem.trigger("loaded",[r])}),this.$elem.trigger("initialized",[this])},progress:function(e){t.extend(this,e),this.options.display?this.options.display.apply(this.elem,[this,this.elem]):"oembed"===this.options.endpoint&&this.display(),this.loaded.resolve(this)},imageStyle:function(){var t,e=[];return this.options.addImageStyles&&(this.options.query.maxwidth&&(t=isNaN(parseInt(this.options.query.maxwidth,10))?"":"px",e.push("max-width: "+this.options.query.maxwidth+t)),this.options.query.maxheight&&(t=isNaN(parseInt(this.options.query.maxheight,10))?"":"px",e.push("max-height: "+this.options.query.maxheight+t))),e.join(";")},display:function(){if("error"===this.type)return!1;this.style=this.imageStyle();var t;"photo"===this.type?(t="<a href='"+this.original_url+"' target='_blank'>",t+="<img style='"+this.style+"' src='"+this.url+"' alt='"+this.title+"' /></a>"):"video"===this.type||"rich"===this.type?t=this.html:(this.title=this.title||this.url,t=this.thumbnail_url?"<img src='"+this.thumbnail_url+"' class='thumb' style='"+this.style+"'/>":"",t+="<a href='"+this.original_url+"'>"+this.title+"</a>",t+=this.provider_name?"<a href='"+this.provider_url+"' class='provider'>"+this.provider_name+"</a>":"",t+=this.description?'<div class="description">'+this.description+"</div>":""),this.options.wrapElement&&(t="<"+this.options.wrapElement+' class="'+this.options.className+'">'+t+"</"+this.options.wrapElement+">"),this.code=t,"replace"===this.options.method?this.$elem.replaceWith(this.code):"after"===this.options.method?this.$elem.after(this.code):"afterParent"===this.options.method?this.$elem.parent().after(this.code):"replaceParent"===this.options.method&&this.$elem.parent().replaceWith(this.code),this.$elem.trigger("displayed",[this])}},t.embedly=new l,t.embedly.display=new u,t.fn.embedly=function(i){if(void 0===i||"object"==typeof i){if(i=t.extend({},e,t.embedly.defaults,"object"==typeof i&&i),n(i.key))return t.embedly.log("error","Embedly jQuery requires an API Key. Please sign up for one at http://embed.ly"),this.each(t.noop);var r={},o=function(e){if(!t.data(t(e),"embedly")){var n=t(e).attr("href"),o=new d(e,n,i);t.data(e,"embedly",o),r.hasOwnProperty(n)?r[n].push(o):r[n]=[o]}},a=this.each(function(){n(t(this).attr("href"))?t(this).find("a").each(function(){n(t(this).attr("href"))||o(this)}):o(this)}),s=t.embedly.ajax(i.endpoint,t.map(r,function(t,e){return e}),i).progress(function(e){t.each(r[e.original_url],function(t,i){i.progress(e)})});return i.progress&&s.progress(i.progress),i.done&&s.done(i.done),a}},t.expr[":"].embedly=function(e){return!n(t(e).data("embedly"))},t.fn.display=function(i,r){if(n(i)&&(i="display"),void 0===r||"object"==typeof r){if(r=t.extend({},e,t.embedly.defaults,"object"==typeof r&&r),n(r.key))return t.embedly.log("error","Embedly jQuery requires an API Key. Please sign up for one at http://embed.ly/display"),this.each(t.noop);var o=function(e){var n=t(e);if(!n.data("display")){var o=n.data("src")||n.attr("href"),a={original_url:o,url:t.embedly.display.build(i,o,r)};n.data("display",a),n.trigger("initialized",[e]);var s="<img src='"+a.url+"' />";n.is("a")?n.append(s):n.replaceWith(s)}},a=function(e){return!n(t(e).data("src"))||!n(t(e).attr("href"))};return this.each(function(){a(this)?o(this):t(this).find("img,a").each(function(){a(this)&&o(this)})})}},t.expr[":"].display=function(e){return!n(t(e).data("display"))}}(jQuery,window),$(document).ready(function(){$("li.link").each(function(t,e){$(e).children("a.adder").click(function(){link=$(e).children("a.actual")[0],title=$(link).text(),tags=$(this).data("tags"),url=$(link).attr("href"),mkd="\n["+title+"]("+url+")\n\n"+tags,ta=$('textarea[name="text"]'),ta.val(ta.val()+mkd)})})}),$(document).ready(function(){$("textarea[name=text]").length&&$("textarea[name=text]").bind("input propertychange",function(){$.post("/md",{text:$(this).val()},function(t){$("#rendered").html(t)})});$("input[name=title]").length&&$("input[name=title]").bind("input propertychange",function(){$("#rendered_title").text($("input[name=title]").val())}),$(".slidingDiv").hide(),$(".show_hide").click(function(){$("#rendered").slideToggle()})}),$(document).ready(function(){var t=/https?:\/\/(www\.)?(youtu|vimeo|soundcloud).+/i,e={key:"be853af8968a408eb7ec368d2019614a",query:{maxwidth:Math.min($(window).width(),720),words:20},secure:!0,method:$.noop,urlRe:t};$.embedly.defaults=e,$(".markdown a").each(function(t,e){var i=$(e).attr("href");$.embedly.oembed([i]).done(function(t){var n=$("<div/>",{class:"embed pure-u-1",data:i});if(!t[0].error){void 0!=t[0].html?(n.append(t[0].html),n.removeClass("embed")):(title=$("<h1/>").append(t[0].title),desc=$("<p/>").append(t[0].description),n.append(title),n.append(desc));$(e).parents(".post").children(".addons").append(n)}})})}),$(document).ready(function(){$("time").each(function(t,e){var i=moment($(e).attr("datetime"),"YYYY-MM-DDTHH:mm:ss.SSSSSSZ");console.log(i),$(e).text(i.fromNow()),$(e).attr("title",i.format())}),$("#links h2").each(function(t,e){var i=moment($(e).text(),"YYYY-MM-DD HH:mm:ssZ");$(e).text(i.utc().format("MMMM Do YYYY"))})});
//# sourceMappingURL=/js/nat.min.js.map